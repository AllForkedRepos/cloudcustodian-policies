policies:
  - name: team-tag-s3-audit
    resource: s3 
    description: |
      Cloud Custodian Team Tag for S3 Buckets Audit
    comments: |
      Retrieve list of all S3 buckets that
      - are missing the tag "Team"
    filters:
      - "tag:Team": absent
    actions:
      - type: notify
        template: team-tag-audit.html
        slack_template: slack-team-tag-audit
        template_format: 'html'
        priority_header: '5'
        subject: 'Tag Audit: S3 Bucket(s) with no tag named Team'
        to:
          - cloudcustodianadmins@tri.global
          - slack://#ie-stratus
        owner_absent_contact:
          - cloudcustodianadmins@tri.global
        transport:
          type: sqs
          queue: https://sqs.us-east-1.amazonaws.com/929292782238/cloud-cloudcustodian
